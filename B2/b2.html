<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Image Compare</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div>
      <input type="text" />

      <img src="after.jpg" />
      <img src="before.jpg" />
    </div>
  </body>
  <script>
    const container = document.querySelector("div");
    const divider = container.querySelector("input");
    const afterImg = container.querySelectorAll("img")[0];
    const beforeImg = container.querySelectorAll("img")[1];

    let dragging = false;

    function moveDivider(x) {
      const rect = container.getBoundingClientRect();
      let pos = x - rect.left;

      if (pos < 0) pos = 0;
      if (pos > rect.width) pos = rect.width;

      divider.style.left = pos + "px";
      let percentage = (pos / rect.width) * 100;
      beforeImg.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
    }

    container.addEventListener("click", (e) => moveDivider(e.clientX));
    divider.addEventListener("mousedown", () => (dragging = true));
    window.addEventListener("mouseup", () => (dragging = false));
    window.addEventListener("mousemove", (e) => {
      if (dragging) moveDivider(e.clientX);
    });
  </script>
</html>
