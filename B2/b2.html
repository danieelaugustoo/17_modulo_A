<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Compare</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="slider">
      <img src="after.jpg" class="after" />
      <img src="before.jpg" class="before" />
      <input type="text" class="divider" />
      <p id="after">After</p>
      <p id="before">Before</p>
    </div>
  </body>
  <script>
    const slider = document.querySelector(".slider");
    const divider = document.querySelector(".divider");
    const afterImg = document.querySelector(".after");
    const beforeImg = document.querySelector(".before");
    let dragging = false;
    function moveDivider(x) {
      const rect = slider.getBoundingClientRect();
      let pos = x - rect.left;

      if (pos < 0) pos = 0;
      if (pos > rect.width) pos = rect.width;

      divider.style.left = pos + "px";
      let porcentagem = (pos / rect.width) * 100;
      beforeImg.style.clipPath = `inset(0 ${100 - porcentagem}% 0 0)`;
    }
    slider.addEventListener("click", (e) => moveDivider(e.clientX));
    divider.addEventListener("mousedown", () => (dragging = true));
    window.addEventListener("mouseup", () => (dragging = false));
    window.addEventListener("mousemove", (e) => {
      if (dragging) moveDivider(e.clientX);
    });
  </script>
</html>
